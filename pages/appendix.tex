\thispagestyle{empty}
\addcontentsline{toc}{section}{Bilaga 1. Lua-grammatik}
\pagenumbering{gobble}
\section*{Bilaga 1. Lua-grammatik}

\begin{grammar}
  \singlespace\small%
  \fontfamily{lmr}\selectfont

  <chunk> ::= <block>

  <block> ::= \{<stat>\} [<retstat>]

  <stat> ::=  ";"
     \alt <varlist> "=" <explist>
     \alt <functioncall>
     \alt <label>
     \alt "break"
     \alt "goto" Name
     \alt "do" <block> "end"
     \alt "while" <exp> "do" <block> "end"
     \alt "repeat" <block> "until" <exp>
     \alt "if" <exp> "then" <block> \{"elseif" <exp> "then" <block>\} ["else" <block>] "end"
     \alt "for" Name "=" <exp> "," <exp> ["," <exp>] "do" <block> "end"
     \alt "for" <namelist> "in" <explist> "do" <block> "end"
     \alt "function" funcname <funcbody>
     \alt "local" <function> Name <funcbody>
     \alt "local" <namelist> ["=" <explist>]

  <retstat> ::= "return" [<explist>] [";"]

  <label> ::= "::" Name "::"

  <funcname> ::= Name \{"." Name\} [":" Name]

  <varlist> ::= <var> \{"," <var>\}

  <var> ::= Name | <prefixexp> "[" <exp> "]" | <prefixexp> "." Name

  <namelist> ::= Name \{"," Name\}

  <explist> ::= <exp> \{"," <exp>\}

  <exp> ::=  "nil" | "false" | "true" | Number | String | "..." | <functiondef> |
     <prefixexp> | <tableconstructor> | <exp> <binop> <exp> | <unop> <exp>

  <prefixexp> ::= <var> | <functioncall> | "(" <exp> ")"

  <functioncall> ::=  <prefixexp> <args> | <prefixexp> ":" Name <args>

  <args> ::=  "(" [<explist>] ")" | <tableconstructor> | String

  <functiondef> ::= "function" <funcbody>

  <funcbody> ::= "(" [<parlist>] ")" <block> "end"

  <parlist> ::= <namelist> ["," "..."] | "..."

  <tableconstructor> ::= "\{" [<fieldlist>] "\}"

  <fieldlist> ::= <field> \{<fieldsep> <field>\} [<fieldsep>]

  <field> ::= "[" <exp> "]" "=" <exp> | Name "=" <exp> | <exp>

  <fieldsep> ::= "," | ";"

  <binop> ::= "+" | "-" | "*" | "/" | "\textasciicircum" | "\%" | ".." |
     "<" | "<=" | ">" | ">=" | "==" | "~=" |
     "and" | "or"

  <unop> ::= "-" | "not" | "\#"
\end{grammar}

\addcontentsline{toc}{section}{Bilaga 2. Nodantal analys av LuaMinify}
\section*{Bilaga 2. Nodantal analys av LuaMinify}

Provtagningen är baserad på LuaMinify projektet och implementerat med Luaparse.

\begin{table}[ht]
  \begin{tabular}{l l}
    Nod-typ & Antal \\
    \hline
    Identifier & 1771 \\
    Literal & 705 \\
    MemberExpression & 339 \\
    CallExpression & 334 \\
    AssignmentStatement & 215 \\
    ElseifClause & 181 \\
    LocalStatement & 174 \\
    TableValue & 172 \\
    BinaryExpression & 162 \\
    IfStatementh & 138 \\
    ReturnStatement & 130 \\
    UnaryExpression & 122 \\
    Comment & 122 \\
    TableConstructorExpression & 101 \\
    IndexExpression & 56 \\
    TableKeyString & 49 \\
    LogicalExpression & 44 \\
    ElseClause & 39 \\
    FunctionDeclaration & 38 \\
    CallStatement & 26 \\
    WhileStatement24TableKey & 20 \\
    BreakStatement & 12 \\
    TableCallExpression & 9 \\
    ForGenericStatement & 6 \\
    ForNumericStatement & 5 \\
    RepeatStatement & 4 \\
    Chunk & 1 \\
    \hline
    Totalt & 4999
  \end{tabular}
\end{table}
